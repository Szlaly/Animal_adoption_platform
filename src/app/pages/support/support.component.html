<div class="support-page">
  <h2>üõ†Ô∏è Support</h2>
  <p>Ha k√©rd√©sed van vagy probl√©m√°ba √ºtk√∂zt√©l, √≠rj nek√ºnk!</p>

  <form (ngSubmit)="submitSupportRequest()" class="support-form">
    <input type="text" [(ngModel)]="subject" name="subject" placeholder="T√°rgy" required />
    <textarea [(ngModel)]="message" name="message" placeholder="√úzenet" rows="4" required></textarea>
    <button type="submit">K√ºld√©s</button>
  </form>

  <h2>üì¨ T√°mogat√°si k√©relmeid</h2>

  <div *ngIf="supportRequests.length > 0; else noSupport">
    <div *ngFor="let req of supportRequests" class="support-request">
      <h4>{{ req.subject }}</h4>
      <p>
        <strong>√Ållapot:</strong>
        <span [ngClass]="{ 'text-success': req.status === 'open', 'text-danger': req.status === 'closed' }">
          {{ req.status === 'closed' ? 'Lez√°rva' : 'Akt√≠v' }}
        </span>
      </p>

      <div class="messages">
        <div *ngFor="let msg of req.messages"
             [ngClass]="{ 'own-message': isOwnMessage(msg.sender._id), 'other-message': !isOwnMessage(msg.sender._id) }">
          <p><strong>{{ msg.sender.name }}:</strong></p>
          <p>{{ msg.text }}</p>
          <p class="timestamp" *ngIf="msg.sentAt">{{ msg.sentAt | date:'short' }}</p>
        </div>
      </div>

      <div class="reply-form" *ngIf="req.status === 'open'; else closedInfo">
        <textarea [(ngModel)]="newMessages[req._id]" placeholder="V√°lasz..."></textarea>
        <button (click)="sendReply(req._id)" [disabled]="!newMessages[req._id].trim()">V√°lasz k√ºld√©se</button>
      </div>

      <ng-template #closedInfo>
        <p class="text-muted">Ez a k√©r√©s le van z√°rva, nem k√ºldhet≈ë t√∂bb v√°lasz.</p>
      </ng-template>
    </div>
  </div>

  <ng-template #noSupport>
    <p>Nincs m√©g t√°mogat√°si k√©r√©sed.</p>
  </ng-template>
</div>
